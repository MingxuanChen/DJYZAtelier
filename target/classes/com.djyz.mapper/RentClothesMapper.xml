<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.djyz.mapper.RentClothesMapper" >
  <resultMap id="BaseResultMap" type="com.djyz.domain.RentClothes" >
    <id column="clo_id" property="cloId" jdbcType="BIGINT" />
    <result column="clo_name" property="cloName" jdbcType="VARCHAR" />
    <result column="clo_price" property="cloPrice" jdbcType="DOUBLE" />
    <result column="clo_picture" property="cloPicture" jdbcType="VARCHAR" />
    <result column="clo_detail" property="cloDetail" jdbcType="VARCHAR" />
    <result column="clo_type" property="cloType" jdbcType="BIGINT" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    delete from rent_clothes
    where clo_id = #{cloId,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.djyz.domain.RentClothes" >
    insert into rent_clothes (clo_id, clo_name, clo_price, 
      clo_picture, clo_detail, clo_type
      )
    values (#{cloId,jdbcType=BIGINT}, #{cloName,jdbcType=VARCHAR}, #{cloPrice,jdbcType=DOUBLE}, 
      #{cloPicture,jdbcType=VARCHAR}, #{cloDetail,jdbcType=VARCHAR}, #{cloType,jdbcType=BIGINT}
      )
  </insert>
  <!--更新-->
  <update id="updateByPrimaryKey" parameterType="com.djyz.domain.RentClothes" >
    update rent_clothes
    set clo_name = #{cloName,jdbcType=VARCHAR},
      clo_price = #{cloPrice,jdbcType=DOUBLE},
      clo_picture = #{cloPicture,jdbcType=VARCHAR},
      clo_detail = #{cloDetail,jdbcType=VARCHAR},
      clo_type = #{cloType,jdbcType=BIGINT}
    where clo_id = #{cloId,jdbcType=BIGINT}
  </update>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    select clo_id, clo_name, clo_price, clo_picture, clo_detail, clo_type
    from rent_clothes
    where clo_id = #{cloId,jdbcType=BIGINT}
  </select>

  <sql id="where_sql">
    <where>
      <if test="keyword != null and keyword != ''">
        and clo_name like concat('%',#{keyword},'%')
        or clo_detail like concat('%',#{keyword},'%')
      </if>
    </where>
  </sql>
  <!--查询全部服装（分页，高级查询）-->
  <select id="selectAll" resultMap="BaseResultMap" >
    select clo_id, clo_name, clo_price, clo_picture, clo_detail, clo_type from rent_clothes
    <include refid="where_sql"/>
    order by clo_id
  </select>


  <!--根据服装分类的id获取服装-->
  <select id="getClothesWithTypeId" resultMap="BaseResultMap">
    select * from rent_clothes where clo_type = #{cloType}
  </select>


</mapper>